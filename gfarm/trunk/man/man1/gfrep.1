.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFREP" "1" "05 August 2006" "Gfarm" ""

.SH NAME
gfrep \- replicate Gfarm files
.SH SYNOPSIS

\fBgfrep\fR \fB-H \fIhostfile\fB\fR [ \fB-vm\fR ] \fB\fIgfarm-URL\fB\fR\fI ...\fR


\fBgfrep\fR \fB-P \fIhost-pair-file\fB\fR [ \fB-vm\fR ] \fB\fIgfarm-URL\fB\fR\fI ...\fR


\fBgfrep\fR \fB-d \fIdestination-node\fB\fR [ \fB-s \fIsource-node\fB\fR ] [ \fB-I \fIfile-section\fB\fR ] [ \fB-vm\fR ] \fB\fIgfarm-URL\fB\fR\fI ...\fR


\fBgfrep\fR [ \fB-D \fIdestination-domainname\fB\fR ] [ \fB-S \fIsource-domainname\fB\fR | \fB-s \fIsource-node\fB\fR ] [ \fB-N \fInum-of-replicas\fB\fR ] [ \fB-v\fR ] \fB\fIgfarm-URL\fB\fR\fI ...\fR

.SH "DESCRIPTION"
.PP
\fBgfrep\fR creates replicas of Gfarm files
specified by the \fIGfarm-URL\fR\&.
.PP
If the \fIGfarm-URL\fR parameter is a directory,
it will be copied recursively.
.SH "OPTIONS"
.TP
\fB-D \fIdestination-domainname\fB\fR
specifies a domainname of destination filesystem nodes where replicas
will be copies to.
This option is used solely, or with the \fB-S\fR
or \fB-s\fR option.

If neither this nor \fB-d\fR option is specified, 
replicas may be copied to any of hosts registered in the metadata.
Please refer the description of the \fB-N\fR option for detail.
.TP
\fB-d \fIdestination-node\fB\fR
specifies one destination filesystem node where replicas
will be copied to.
This option is used solely, or with the \fB-s\fR 
option.

If neither this nor \fB-D\fR option is specified, 
replicas may be copied to any of hosts registered in the metadata.
.TP
\fB-H \fIhostfile\fB\fR
specifies a file which describes hostnames of
destination filesystem nodes where the replica will be made on.
The \fIhostfile\fR consists of a filesystem node name
in each line.
If the number of nodes listed in the \fIhostfile\fR
is less than the total number of file fragments,
it is treated as if the node names are specified repeatedly.

if ``-'' is specified, standard input is used to read the host list.
.TP
\fB-I \fIfile-section\fB\fR
specifies a file section name to be copied.
Currently, this option can be specified only with the \fB-d\fR
option.

It is possible to omit this option.
.TP
\fB-m\fR
lets gfrep command do migrate/move, instead of doing replicate.
Currently, this works only with -H, -P and -d options.
.TP
\fB-N \fInum-of-replicas\fB\fR
specifies necessary number of file replicas, counting already
existing ones.
If there are enough number of replicas in the destination nodes,
neither any copy nor any removal will be done.
This option is used solely, or with the \fB-D\fR,
\fB-S\fR or \fB-s\fR option.

If this option is not specified, \fB-N 1\fR is assumed.

The source nodes specified by \fB-S\fR or \fB-s\fR
option are excluded from the destination nodes, unless the destination
is a subset of the source, i.e. unless the exclusion makes the destination
an empty set.
For example, if gfrep is executed with the
``\fB-N 3 -S subdomain.example.org -D example.org\fR\&'' option,
it's guaranteed that there are at least 3 replicas in the hosts belong
to example.org but except subdomain.example.org.
.TP
\fB-P \fIhost-pair-file\fB\fR
specifies a file which describes hostname pairs of
source nodes and destination nodes.
The \fIhost-pair-file\fR consists of a pair
of a source node name and a destination node name in this order in each line.
The replica will be copied to the destination node, only if it exists
on the source node of the pair.
.TP
\fB-S \fIsource-domainname\fB\fR
specifies a domainname of source filesystem nodes where replicas
will be copied from.
This option is used solely, or with the \fB-D\fR
option.

If neither this nor \fB-s\fR option is specified, 
the source nodes will be selected from all nodes.

The hosts specified by this option will be excluded from
the destination nodes.
Please refer the description of the \fB-N\fR option for detail.
.TP
\fB-s \fIsource-node\fB\fR
specifies a source filesystem node where replicas
will be copied from.
This option is used solely, or with the \fB-D\fR
or \fB-d\fR option.

If neither this nor \fB-s\fR option is specified, 
the source nodes will be selected from all nodes.

The host specified by this option will be excluded from
the destination nodes.
Please refer the description of the \fB-N\fR option for detail.
.TP
\fB-v\fR
displays verbose output.
.TP
\fB-?\fR
displays a list of command options.
