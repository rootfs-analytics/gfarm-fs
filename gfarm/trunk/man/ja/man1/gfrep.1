.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "GFREP" "1" "04 August 2006" "Gfarm" ""

.SH NAME
gfrep \- Gfarm ファイルの複製を作成する．
.SH SYNOPSIS

\fBgfrep\fR [ \fB-vm\fR ] \fB-H \fIホスト指定ファイル\fB\fR \fB\fIgfarm-URL\fB\fR\fI ...\fR


\fBgfrep\fR [ \fB-v\fR ] [ \fB-S \fI複製元ドメイン名\fB\fR ] [ \fB-D \fI複製先ドメイン名\fB\fR ] [ \fB-N \fI複製数\fB\fR ] \fB\fIgfarm-URL\fB\fR\fI ...\fR


\fBgfrep\fR [ \fB-vm\fR ] \fB-P \fIホスト対指定ファイル\fB\fR \fB\fIgfarm-URL\fB\fR\fI ...\fR


\fBgfrep\fR [ \fB-vm\fR ] [ \fB-s \fI複製元ホスト\fB\fR ] [ \fB-d \fI複製先ホスト\fB [ -I \fIフラグメント番号\fB ]\fR ] \fB\fIgfarm-URL\fB\fR\fI ...\fR

.SH "DESCRIPTION"
.PP
引数 Gfarm-URL で指定したファイルの複製を，
指定されたホストに作成します．
.SH "OPTIONS"
.TP
\fB-v\fR
複製処理に関して，冗長な表示を行ないます，
.TP
\fB-m\fR
複製ではなく移動を行ないます．
現在のところ，このオプションは，-H，-P, -d オプションを指定した場合にしか
動作しません．
.TP
\fB-H \fIホスト指定ファイル\fB\fR
各フラグメントの複製を作成するホスト名のリストを記述した
ファイル名を指定します．
ホスト名は，ファイル中の各行に一ホストずつ記述します．
指定したホスト名の数がフラグメントの数よりも少ない場合，
フラグメントの数と一致するまでホスト名のリストを繰り返し指定した
ものと見なします．

ファイル名として ``-'' を指定した場合，標準入力からホス
ト名のリストを読み込みます．

指定した Gfarm-URL がディレクトリの場合，そのディレクトリを
再帰的に複製します．
.TP
\fB-S \fI複製元ドメイン名\fB\fR
各フラグメントの複製元のホストのドメイン名を指定します．

このオプションを省略し，他の複製元ホストを指定するオプションも
使用しない場合は，メタデータに登録されているすべてのホストのいずれかから
複製を作成します．

このオプションで指定されたドメインのホストが
\fB-D\fR オプションで指定された複製先ドメインにも属していても，
そのホストには複製を作成しません．

指定した Gfarm-URL がディレクトリの場合，そのディレクトリを
再帰的に複製します．
.TP
\fB-D \fI複製先ドメイン名\fB\fR
各フラグメントの複製を作成するホストのドメイン名を指定します．

このオプションを省略し，他の複製先ホストを指定するオプションも
使用しない場合は，メタデータに登録されているすべてのホストのいずれかに
複製を作成します．ただし，この場合に\fB-N\fR オプションで
2以上の複製数を指定しないと複製を行いません．
詳しくは \fB-N\fR オプションの項を参照してください．

指定した Gfarm-URL がディレクトリの場合，そのディレクトリを
再帰的に複製します．
.TP
\fB-N \fI複製数\fB\fR
フラグメントごとに作成する複製の数を指定します．このオプションを
省略すると \fB-N 1\fR と指定されたものとみなされます．
このオプションは単独であるいは \fB-D\fR オプション，
\fB-S\fR オプションとともに用います．

\fB-D\fR オプションで複製先ドメインが指定された場合，
このドメインのホストにあるレプリカ数が指定された数になるように複製しま
す．

\fB-S\fR オプションで複製元ドメインが指定された場合，
このドメイン以外のホストにあるレプリカ数が指定された数になるように複製
します．

\fB-D\fR, \fB-S\fR オプションがともに指定
された場合は，複製先ドメインのホストから複製元ドメインのホストを除いた
ホストにあるレプリカ数が，指定された数になるように複製します．
ただし，複製先ドメインが複製元ドメインに含まれている場合は，複製先ドメ
インのホストにあるレプリカ数が指定された数になるように複製します．

各フラグメントについて，これらの複製対象ホスト上に指定された数以
上の複製が既に存在する場合は，そのフラグメントについて複製の作成も削除
も行いません．
.TP
\fB-P \fIホスト対ファイル\fB\fR
複製元のホストと複製先のホストの対のリストを記述した
ファイル名を指定します．
ファイルの各行には，複製元ホストと複製先ホストを，この順で空白で
区切って指定します．
指定した Gfarm-URL を構成するファイルが，複製元ホストに存在する場合のみ，
そのファイルを複製先ホストにコピーします．

指定した Gfarm-URL がディレクトリの場合，そのディレクトリを
再帰的に複製します．
.TP
\fB-d \fI複製先ホスト\fB\fR
複製先のホストを1つだけ指定します．

このオプションは，通常 \fB-I\fR オプションとともに用いる
必要がありますが，それを省略できる場合もあります．
詳しくは \fB-I\fR オプションの項を参照してください．

指定した Gfarm-URL がディレクトリの場合，そのディレクトリを
再帰的に複製します．
.TP
\fB-s \fI複製元ホスト\fB\fR
ファイルフラグメントの複製元のホストを指定します．
このオプションは単独で，あるいは，\fB-D\fR や
\fB-d\fR オプションと共に用います．
単独で指定された場合や -D オプションと共に指定された場合，ここで
指定されたホストは，複製を作成する対象ホストから除外されます．

このオプションを省略した場合，複製元のホストは自動で選ばれます．
.TP
\fB-I \fIフラグメント番号\fB\fR
指定した Gfarm-URL が通常のファイルなら，このオプションで
そのフラグメント番号を，あるいはプログラムならアーキテクチャ名を
指定します．
このオプションは \fB-d\fR オプションと共に用います．

このオプションは省略できる場合があります．
指定した Gfarm-URL が通常ファイルの場合，そのファイルがフラグメント一つから
構成されているのなら，\fB-I\fR オプションを省略できます．
その場合，\fB-I 0\fR と指定されたものとみなされます．
あるいは，指定した Gfarm-URL がプログラムの場合，\fB-I\fR 
オプションを省略すると複製先ホストのアーキテクチャ名を指定したものと
みなされます．
.TP
\fB-?\fR
引数オプションを表示します．
