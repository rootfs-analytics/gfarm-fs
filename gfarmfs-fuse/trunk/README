Copyright (c) 2005 National Institute of Advanced Industrial Science
and Technology (AIST).  All Rights Reserved.

*** GfarmFS-FUSE

GfarmFS-FUSE enables you to mount a Gfarm filesystem in userspace.

GfarmFS-FUSE requires Gfarm version 1.1.1 (or later) and FUSE version
2.2 (or later) development packages.

  Gfarm:
      http://datafarm.apgrid.org/

  FUSE:
      http://fuse.sourceforge.net/


*** Installation

Make sure Gfarm and FUSE are installed.

Installation steps of GfarmFS-FUSE:

    $ ./configure [options]
    $ make
    $ make install

Options for configure:

  --enable-symlink

  specifies to enable symlink(2) to work.  Enabling this option, 
  symlink(2) creates a special file named NAME.gfarmfs-symlink instead 
  of creating NAME.
  As default, symlink(2) doesn't work on GfarmFS-FUSE because current 
  version of Gfarm, 1.1.1, doesn't support it.

  --enable-linkiscopy

  specifies to enable link(2) to behaves copying a file instead of 
  creating a hardlink.
  As default, link(2) doesn't work on GfarmFS-FUSE because current 
  version of Gfarm, 1.1.1, doesn't support it.

  --prefix=directory

  specifies a destination directory for installation.  The 'gfarmfs'
  command is installed in 'directory'/bin.  Default is /usr/local.

If Gfarm and/or FUSE are installed to a nonstandard location, you may
need to specify the location by CPPFLAGS and LDFLAGS environment
variables in configure.  In the case of sh or bash,

    $ CPPFLAGS='-I/usr/local/include' LDFLAGS='-L/usr/local/lib -Wl,-R,/usr/local/lib' ./configure

In the case of csh or tcsh,

    $ env CPPFLAGS='-I/usr/local/include' LDFLAGS='-L/usr/local/lib -Wl,-R,/usr/local/lib' ./configure


*** Mount

Make sure your Gfarm environment is set. (see INSTALL.en of Gfarm)

If your client host is not registered in Gfarm metadata server, you
need to register the client host by the 'gfhost' command included in
Gfarm client package.

    $ gfhost -c -a <architecture> <hostname>

<architecture> is typically a canonical system name like
sparc-sun-solaris8.  <hostname> is a fully qualified domain name
(FQDN) or an IP address of the client host.

Run the 'gfarmfs' command as a normal user to mount a Gfarm
filesystem:

    $ gfarmfs mountpoint -s [fuse-options]

  Note:
  * The `-s' option is necessary to disable Multi-threaded operation.
  * Only you can usually access the mountpoint. (see README of FUSE)


*** Unmount

Run the 'fusermount' command (see README of FUSE):

    $ fusermount -u mountpoint
