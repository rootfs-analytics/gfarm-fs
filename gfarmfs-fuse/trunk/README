Copyright (c) 2005 National Institute of Advanced Industrial Science
and Technology (AIST).  All Rights Reserved.

*** GfarmFS-FUSE

GfarmFS-FUSE enables you to mount a Gfarm filesystem in userspace.

GfarmFS-FUSE requires Gfarm version 1.1.1 (or later) and FUSE version
2.2 (or later) development packages.

  Gfarm:
      http://datafarm.apgrid.org/

  FUSE:
      http://fuse.sourceforge.net/


*** Installation

Make sure Gfarm and FUSE are installed.

Installation steps of GfarmFS-FUSE:

    $ ./configure [options]
    $ make
    $ make install

Options for configure:

  --prefix=<directory>

  specifies a destination directory for installation.  The 'gfarmfs'
  command is installed in 'directory'/bin.  Default is /usr/local.

If Gfarm and/or FUSE are installed to a nonstandard location, you may
need to specify the location by CPPFLAGS and LDFLAGS environment
variables in configure.  In the case of sh or bash,

    $ CPPFLAGS='-I/usr/local/include' LDFLAGS='-L/usr/local/lib -Wl,-R,/usr/local/lib' ./configure

In the case of csh or tcsh,

    $ env CPPFLAGS='-I/usr/local/include' LDFLAGS='-L/usr/local/lib -Wl,-R,/usr/local/lib' ./configure


*** Mount

Make sure your Gfarm environment is set. (see INSTALL.en of Gfarm)

If your client host is not registered in Gfarm metadata server, 
you need to use the '-a' GfarmFS option. (see GfarmFS options below)

Run the 'gfarmfs' command as a normal user to mount a Gfarm
filesystem:

    $ gfarmfs [GfarmFS options] <mountpoint> [FUSE options]

Note:

  * The `-s' FUSE option is added automatically.
    (to disable Multi-threaded operation)
  * Only you can usually access the mountpoint. (see README of FUSE)

GfarmFS options:

  -s, --symlink

  specifies to enable symlink(2) to work.  Enabling this option, 
  symlink(2) creates a special file named NAME.gfarmfs-symlink instead 
  of creating NAME.
  As default, symlink(2) doesn't work on GfarmFS-FUSE because current 
  version of Gfarm, 1.1.1, doesn't support it.

  -l, --linkiscopy

  specifies to enable link(2) to behave copying a file instead of 
  creating a hardlink.
  As default, link(2) doesn't work on GfarmFS-FUSE because current 
  version of Gfarm, 1.1.1, doesn't support it.

  -a <architecture>

  specifies the architecture name to create/read/write executable
  files in the filesystem nodes according with this architecture.
  This option make it possible that your client host not registered in
  Gfarm metadata server (by the 'gfhost -c' command)
  creates/reads/writes executable files.
  In a filesystem node, this option is not usually needed.
  <architecture> is typically a canonical system name like
  sparc-sun-solaris8. (see man gfhost)


*** Unmount

Run the 'fusermount' command (see README of FUSE):

    $ fusermount -u <mountpoint>
